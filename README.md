# Media-Sorter
Organizing media files by date and choosing a unique filename

When handling a large amount of media files, duplicate filenames are likely to occur. We wish to generate a unique filename and put the files ina time based directory structure.

## Filenames
By using the `identify` command that's part of the ImageMagick suite we can generate a unique identifier. In the case of video files, the unique identifier of the first frame of the video is used.

By using the date in the file:
* original date (generated by camera)
* creation date (on the file system)
* modify date

we generate a filename in the style of `<year>-<month>-<day>-<timeofday>-<identifier>.extension`
organized in a folder structure: `<year>/<month>/<day>`

Processing video and images is separated as they might have very different processing times due to the filesizes
The desired processing "image" or "video" can be set by defining the `MEDIATYPE` environment variable. There is deliberately no default type to avoid mistakes.  If no `MEDIATYPE` is defined, the start script simply exits.


## NFS mounts
The docker container expects 2 NFS mounts, a source ingest folder where files are dropped that need to be processed. This folder is scanned continuously and a destination folder where the files are to be stored. Files are moved, not copied.
